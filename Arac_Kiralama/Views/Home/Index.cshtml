@{
    ViewData["Title"] = "Araç Kiralama";
}

<div class="container-fluid mt-4">
    <div class="row">
        <!-- Sol Taraf - Filtreleme Seçenekleri -->
        <div class="col-md-3">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Filtreleme Seçenekleri</h5>
                </div>
                <div class="card-body">
                    <form id="filterForm">
                        <div class="mb-3">
                            <label for="vitesTipi" class="form-label fw-bold">Vites Tipi</label>
                            <select class="form-select" id="vitesTipi" name="vitesTipi">
                                <option value="">Tümü</option>
                                <option value="Otomatik">Otomatik</option>
                                <option value="Manuel">Manuel</option>
                                <option value="Yarı Otomatik">Yarı Otomatik</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="benzinTipi" class="form-label fw-bold">Yakıt Tipi</label>
                            <select class="form-select" id="benzinTipi" name="benzinTipi">
                                <option value="">Tümü</option>
                                <option value="Benzin">Benzin</option>
                                <option value="Dizel">Dizel</option>
                                <option value="LPG">LPG</option>
                                <option value="Elektrik">Elektrik</option>
                                <option value="Hibrit">Hibrit</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">Günlük Fiyat Aralığı</label>
                            <div class="d-flex gap-2">
                                <input type="number" class="form-control" id="minFiyat" name="minFiyat" placeholder="Min ₺">
                                <input type="number" class="form-control" id="maxFiyat" name="maxFiyat" placeholder="Max ₺">
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="renk" class="form-label fw-bold">Renk</label>
                            <select class="form-select" id="renk" name="renk">
                                <option value="">Tümü</option>
                                <option value="Beyaz">Beyaz</option>
                                <option value="Siyah">Siyah</option>
                                <option value="Gri">Gri</option>
                                <option value="Kırmızı">Kırmızı</option>
                                <option value="Mavi">Mavi</option>
                                <option value="Yeşil">Yeşil</option>
                            </select>
                        </div>

                        <button type="button" id="filterButton" class="btn btn-primary w-100">Filtrele</button>
                        <button type="button" id="resetButton" class="btn btn-outline-secondary w-100 mt-2">Filtreleri Temizle</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Sağ Taraf - Araç Kartları -->
        <div class="col-md-9">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3>Araç Listesi</h3>
                <div class="d-flex gap-2 align-items-center">
                    <label for="sirala" class="form-label mb-0">Sırala:</label>
                    <select class="form-select form-select-sm" id="sirala" style="width: auto;">
                        <option value="fiyatArtan">Fiyat (Artan)</option>
                        <option value="fiyatAzalan">Fiyat (Azalan)</option>
                        <option value="modelYeni">Model (Yeni)</option>
                        <option value="modelEski">Model (Eski)</option>
                    </select>
                </div>
            </div>

            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4" id="aracListesi">
                <!-- Araç Kartları Buraya Gelecek (Statik Örnek) -->
                <div class="col">
                    <div class="card h-100 shadow-sm">
                        <img src="https://via.placeholder.com/350x200?text=Toyota+Corolla" class="card-img-top" alt="Toyota Corolla" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Toyota Corolla</h5>
                            <div class="card-text">
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Vites Tipi:</small>
                                        <p class="mb-0">Otomatik</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Yakıt Tipi:</small>
                                        <p class="mb-0">Benzin</p>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Renk:</small>
                                        <p class="mb-0">Beyaz</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Model Yılı:</small>
                                        <p class="mb-0">2022</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer bg-white d-flex justify-content-between align-items-center">
                            <span class="fw-bold text-primary fs-5">750 ₺</span>
                            <a href="#" class="btn btn-sm btn-outline-primary">Detaylar</a>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="card h-100 shadow-sm">
                        <img src="https://via.placeholder.com/350x200?text=Volkswagen+Passat" class="card-img-top" alt="Volkswagen Passat" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Volkswagen Passat</h5>
                            <div class="card-text">
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Vites Tipi:</small>
                                        <p class="mb-0">Otomatik</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Yakıt Tipi:</small>
                                        <p class="mb-0">Dizel</p>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Renk:</small>
                                        <p class="mb-0">Siyah</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Model Yılı:</small>
                                        <p class="mb-0">2021</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer bg-white d-flex justify-content-between align-items-center">
                            <span class="fw-bold text-primary fs-5">950 ₺</span>
                            <a href="#" class="btn btn-sm btn-outline-primary">Detaylar</a>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="card h-100 shadow-sm">
                        <img src="https://via.placeholder.com/350x200?text=Renault+Clio" class="card-img-top" alt="Renault Clio" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Renault Clio</h5>
                            <div class="card-text">
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Vites Tipi:</small>
                                        <p class="mb-0">Manuel</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Yakıt Tipi:</small>
                                        <p class="mb-0">Benzin</p>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Renk:</small>
                                        <p class="mb-0">Mavi</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Model Yılı:</small>
                                        <p class="mb-0">2020</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer bg-white d-flex justify-content-between align-items-center">
                            <span class="fw-bold text-primary fs-5">500 ₺</span>
                            <a href="#" class="btn btn-sm btn-outline-primary">Detaylar</a>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="card h-100 shadow-sm">
                        <img src="https://via.placeholder.com/350x200?text=Ford+Focus" class="card-img-top" alt="Ford Focus" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Ford Focus</h5>
                            <div class="card-text">
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Vites Tipi:</small>
                                        <p class="mb-0">Manuel</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Yakıt Tipi:</small>
                                        <p class="mb-0">Dizel</p>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Renk:</small>
                                        <p class="mb-0">Gri</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Model Yılı:</small>
                                        <p class="mb-0">2021</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer bg-white d-flex justify-content-between align-items-center">
                            <span class="fw-bold text-primary fs-5">650 ₺</span>
                            <a href="#" class="btn btn-sm btn-outline-primary">Detaylar</a>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="card h-100 shadow-sm">
                        <img src="https://via.placeholder.com/350x200?text=Honda+Civic" class="card-img-top" alt="Honda Civic" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Honda Civic</h5>
                            <div class="card-text">
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Vites Tipi:</small>
                                        <p class="mb-0">Otomatik</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Yakıt Tipi:</small>
                                        <p class="mb-0">Benzin</p>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Renk:</small>
                                        <p class="mb-0">Kırmızı</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Model Yılı:</small>
                                        <p class="mb-0">2022</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer bg-white d-flex justify-content-between align-items-center">
                            <span class="fw-bold text-primary fs-5">800 ₺</span>
                            <a href="#" class="btn btn-sm btn-outline-primary">Detaylar</a>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="card h-100 shadow-sm">
                        <img src="https://via.placeholder.com/350x200?text=Hyundai+i20" class="card-img-top" alt="Hyundai i20" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Hyundai i20</h5>
                            <div class="card-text">
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Vites Tipi:</small>
                                        <p class="mb-0">Manuel</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Yakıt Tipi:</small>
                                        <p class="mb-0">Benzin</p>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Renk:</small>
                                        <p class="mb-0">Beyaz</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Model Yılı:</small>
                                        <p class="mb-0">2020</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer bg-white d-flex justify-content-between align-items-center">
                            <span class="fw-bold text-primary fs-5">450 ₺</span>
                            <a href="#" class="btn btn-sm btn-outline-primary">Detaylar</a>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="card h-100 shadow-sm">
                        <img src="https://via.placeholder.com/350x200?text=BMW+3+Serisi" class="card-img-top" alt="BMW 3 Serisi" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">BMW 3 Serisi</h5>
                            <div class="card-text">
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Vites Tipi:</small>
                                        <p class="mb-0">Otomatik</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Yakıt Tipi:</small>
                                        <p class="mb-0">Dizel</p>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Renk:</small>
                                        <p class="mb-0">Siyah</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Model Yılı:</small>
                                        <p class="mb-0">2022</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer bg-white d-flex justify-content-between align-items-center">
                            <span class="fw-bold text-primary fs-5">1.200 ₺</span>
                            <a href="#" class="btn btn-sm btn-outline-primary">Detaylar</a>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="card h-100 shadow-sm">
                        <img src="https://via.placeholder.com/350x200?text=Mercedes+C+Serisi" class="card-img-top" alt="Mercedes C Serisi" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Mercedes C Serisi</h5>
                            <div class="card-text">
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Vites Tipi:</small>
                                        <p class="mb-0">Otomatik</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Yakıt Tipi:</small>
                                        <p class="mb-0">Dizel</p>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Renk:</small>
                                        <p class="mb-0">Gri</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Model Yılı:</small>
                                        <p class="mb-0">2021</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer bg-white d-flex justify-content-between align-items-center">
                            <span class="fw-bold text-primary fs-5">1.300 ₺</span>
                            <a href="#" class="btn btn-sm btn-outline-primary">Detaylar</a>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="card h-100 shadow-sm">
                        <img src="https://via.placeholder.com/350x200?text=Audi+A3" class="card-img-top" alt="Audi A3" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Audi A3</h5>
                            <div class="card-text">
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Vites Tipi:</small>
                                        <p class="mb-0">Otomatik</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Yakıt Tipi:</small>
                                        <p class="mb-0">Benzin</p>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">Renk:</small>
                                        <p class="mb-0">Beyaz</p>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Model Yılı:</small>
                                        <p class="mb-0">2022</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer bg-white d-flex justify-content-between align-items-center">
                            <span class="fw-bold text-primary fs-5">1.100 ₺</span>
                            <a href="#" class="btn btn-sm btn-outline-primary">Detaylar</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sonuç Bulunamadı Mesajı (Başlangıçta gizli) -->
            <div id="noResultMessage" class="alert alert-info mt-3" style="display: none;">
                <i class="bi bi-info-circle me-2"></i> Arama kriterlerinize uygun araç bulunamadı.
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Statik filtreleme ve sıralama işlemleri için JavaScript
        $(document).ready(function () {
            // Tüm araçları temsil eden veri yapısı (gerçek uygulamada bu veriler backend'den gelecek)
            const araclar = [
                { id: 1, marka: "Toyota", model: "Corolla", modelYili: 2022, vitesTipi: "Otomatik", benzinTipi: "Benzin", renk: "Beyaz", gunlukFiyat: 750, resimUrl: "https://via.placeholder.com/350x200?text=Toyota+Corolla" },
                { id: 2, marka: "Volkswagen", model: "Passat", modelYili: 2021, vitesTipi: "Otomatik", benzinTipi: "Dizel", renk: "Siyah", gunlukFiyat: 950, resimUrl: "https://via.placeholder.com/350x200?text=Volkswagen+Passat" },
                { id: 3, marka: "Renault", model: "Clio", modelYili: 2020, vitesTipi: "Manuel", benzinTipi: "Benzin", renk: "Mavi", gunlukFiyat: 500, resimUrl: "https://via.placeholder.com/350x200?text=Renault+Clio" },
                { id: 4, marka: "Ford", model: "Focus", modelYili: 2021, vitesTipi: "Manuel", benzinTipi: "Dizel", renk: "Gri", gunlukFiyat: 650, resimUrl: "https://via.placeholder.com/350x200?text=Ford+Focus" },
                { id: 5, marka: "Honda", model: "Civic", modelYili: 2022, vitesTipi: "Otomatik", benzinTipi: "Benzin", renk: "Kırmızı", gunlukFiyat: 800, resimUrl: "https://via.placeholder.com/350x200?text=Honda+Civic" },
                { id: 6, marka: "Hyundai", model: "i20", modelYili: 2020, vitesTipi: "Manuel", benzinTipi: "Benzin", renk: "Beyaz", gunlukFiyat: 450, resimUrl: "https://via.placeholder.com/350x200?text=Hyundai+i20" },
                { id: 7, marka: "BMW", model: "3 Serisi", modelYili: 2022, vitesTipi: "Otomatik", benzinTipi: "Dizel", renk: "Siyah", gunlukFiyat: 1200, resimUrl: "https://via.placeholder.com/350x200?text=BMW+3+Serisi" },
                { id: 8, marka: "Mercedes", model: "C Serisi", modelYili: 2021, vitesTipi: "Otomatik", benzinTipi: "Dizel", renk: "Gri", gunlukFiyat: 1300, resimUrl: "https://via.placeholder.com/350x200?text=Mercedes+C+Serisi" },
                { id: 9, marka: "Audi", model: "A3", modelYili: 2022, vitesTipi: "Otomatik", benzinTipi: "Benzin", renk: "Beyaz", gunlukFiyat: 1100, resimUrl: "https://via.placeholder.com/350x200?text=Audi+A3" }
            ];

            // Araç kartını oluşturan fonksiyon
            function createAracCard(arac) {
                return `
                        <div class="col">
                            <div class="card h-100 shadow-sm">
                                <img src="${arac.resimUrl}" class="card-img-top" alt="${arac.marka} ${arac.model}" style="height: 200px; object-fit: cover;">
                                <div class="card-body">
                                    <h5 class="card-title">${arac.marka} ${arac.model}</h5>
                                    <div class="card-text">
                                        <div class="row mb-2">
                                            <div class="col-6">
                                                <small class="text-muted">Vites Tipi:</small>
                                                <p class="mb-0">${arac.vitesTipi}</p>
                                            </div>
                                            <div class="col-6">
                                                <small class="text-muted">Yakıt Tipi:</small>
                                                <p class="mb-0">${arac.benzinTipi}</p>
                                            </div>
                                        </div>
                                        <div class="row mb-2">
                                            <div class="col-6">
                                                <small class="text-muted">Renk:</small>
                                                <p class="mb-0">${arac.renk}</p>
                                            </div>
                                            <div class="col-6">
                                                <small class="text-muted">Model Yılı:</small>
                                                <p class="mb-0">${arac.modelYili}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer bg-white d-flex justify-content-between align-items-center">
                                    <span class="fw-bold text-primary fs-5">${arac.gunlukFiyat.toLocaleString('tr-TR')} ₺</span>
                                    <a href="#" class="btn btn-sm btn-outline-primary">Detaylar</a>
                                </div>
                            </div>
                        </div>
                        `;
            }

            // Araçları filtreleyen fonksiyon
            function filterAraclar() {
                const vitesTipi = $("#vitesTipi").val();
                const benzinTipi = $("#benzinTipi").val();
                const minFiyat = $("#minFiyat").val() ? parseInt($("#minFiyat").val()) : 0;
                const maxFiyat = $("#maxFiyat").val() ? parseInt($("#maxFiyat").val()) : Number.MAX_SAFE_INTEGER;
                const renk = $("#renk").val();
                const siralamaKriteri = $("#sirala").val();

                // Filtreleme
                let filtrelenmisAraclar = araclar.filter(arac => {
                    return (vitesTipi === "" || arac.vitesTipi === vitesTipi) &&
                        (benzinTipi === "" || arac.benzinTipi === benzinTipi) &&
                        (arac.gunlukFiyat >= minFiyat && arac.gunlukFiyat <= maxFiyat) &&
                        (renk === "" || arac.renk === renk);
                });

                // Sıralama
                switch (siralamaKriteri) {
                    case "fiyatArtan":
                        filtrelenmisAraclar.sort((a, b) => a.gunlukFiyat - b.gunlukFiyat);
                        break;
                    case "fiyatAzalan":
                        filtrelenmisAraclar.sort((a, b) => b.gunlukFiyat - a.gunlukFiyat);
                        break;
                    case "modelYeni":
                        filtrelenmisAraclar.sort((a, b) => b.modelYili - a.modelYili);
                        break;
                    case "modelEski":
                        filtrelenmisAraclar.sort((a, b) => a.modelYili - b.modelYili);
                        break;
                }

                // Sonuçları göster
                const aracListesi = $("#aracListesi");
                aracListesi.empty();

                if (filtrelenmisAraclar.length === 0) {
                    $("#noResultMessage").show();
                } else {
                    $("#noResultMessage").hide();
                    filtrelenmisAraclar.forEach(arac => {
                        aracListesi.append(createAracCard(arac));
                    });
                }
            }

            // Filtrele butonuna tıklandığında
            $("#filterButton").on("click", function () {
                filterAraclar();
            });

            // Filtreleri temizle butonuna tıklandığında
            $("#resetButton").on("click", function () {
                $("#vitesTipi").val("");
                $("#benzinTipi").val("");
                $("#minFiyat").val("");
                $("#maxFiyat").val("");
                $("#renk").val("");
                filterAraclar();
            });

            // Sıralama değiştiğinde
            $("#sirala").on("change", function () {
                filterAraclar();
            });

            // Sayfa yüklendiğinde tüm araçları göster
            filterAraclar();
        });
    </script>
}